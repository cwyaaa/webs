<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>我的收藏夹</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .main-content {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .left, .right {
      width: 48%;
    }
    input, button, select {
      margin: 5px;
      padding: 5px;
    }
    .bookmark {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
    }
    .category {
      font-weight: bold;
      margin-top: 20px;
    }
    .bookmark a {
      color: #007bff;
      text-decoration: none;
    }
    .bookmark a:hover {
      text-decoration: underline;
    }
    .bookmark-title {
      font-weight: bold;
    }
    .bookmark-url {
      color: #555;
    }
    .bookmark .count {
      font-size: 14px;
      color: #888;
    }
    .sorted-bookmarks {
      display: flex;
      flex-direction: column;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
      margin-top: 20px;
    }
  </style>
  <script type="module" src="./config.js"></script>
  <script type="module" src="./bookmarks.js"></script>
</head>
<body>
  <header>
    <h2 id="title">欢迎</h2>
    <button onclick="logout()">退出</button>
  </header>

  <div class="main-content">
    <div class="left">
      <h3>添加收藏</h3>
      <input id="bookmark-title" placeholder="网站名称" />
      <input id="bookmark-url" placeholder="https://..." />
      <select id="bookmark-category">
        <option value="学习">学习</option>
        <option value="娱乐">娱乐</option>
        <option value="工作">工作</option>
      </select>
      <button onclick="addBookmark()">添加</button>
      <input id="search" placeholder="搜索收藏" oninput="searchBookmarks()" />
      <div id="bookmarks"></div>
    </div>

    <div class="right">
      <h3>按点击数量排序</h3>
      <div id="sorted-bookmarks" class="sorted-bookmarks"></div>
    </div>
  </div>

  <script>
    let bookmarks = [];
    let sortedBookmarks = [];

    // 添加收藏功能
    function addBookmark() {
      const title = document.getElementById('bookmark-title').value;
      const url = document.getElementById('bookmark-url').value;
      const category = document.getElementById('bookmark-category').value;

      const newBookmark = {
        title,
        url,
        category,
        clicks: 0 // 初始点击量为 0
      };

      bookmarks.push(newBookmark);
      displayBookmarks();
      updateSortedBookmarks();
    }

    // 显示收藏列表
    function displayBookmarks() {
      const bookmarksContainer = document.getElementById('bookmarks');
      bookmarksContainer.innerHTML = '';
      
      bookmarks.forEach((bookmark, index) => {
        const div = document.createElement('div');
        div.classList.add('bookmark');
        
        const title = document.createElement('span');
        title.classList.add('bookmark-title');
        title.textContent = bookmark.title;

        const url = document.createElement('span');
        url.classList.add('bookmark-url');
        url.innerHTML = `<a href="${bookmark.url}" target="_blank">${bookmark.url}</a>`;

        const count = document.createElement('span');
        count.classList.add('count');
        count.textContent = `点击量: ${bookmark.clicks}`;

        const clickButton = document.createElement('button');
        clickButton.textContent = '点击';
        clickButton.onclick = () => {
          bookmark.clicks++;
          displayBookmarks();
          updateSortedBookmarks();
        };

        div.appendChild(title);
        div.appendChild(url);
        div.appendChild(count);
        div.appendChild(clickButton);

        bookmarksContainer.appendChild(div);
      });
    }

    // 根据点击数量更新排序
    function updateSortedBookmarks() {
      sortedBookmarks = [...bookmarks].sort((a, b) => b.clicks - a.clicks);

      const sortedBookmarksContainer = document.getElementById('sorted-bookmarks');
      sortedBookmarksContainer.innerHTML = '';

      sortedBookmarks.forEach(bookmark => {
        const div = document.createElement('div');
        div.classList.add('bookmark');

        const title = document.createElement('span');
        title.classList.add('bookmark-title');
        title.textContent = bookmark.title;

        const count = document.createElement('span');
        count.classList.add('count');
        count.textContent = `点击量: ${bookmark.clicks}`;

        div.appendChild(title);
        div.appendChild(count);

        sortedBookmarksContainer.appendChild(div);
      });
    }

    // 搜索功能
    function searchBookmarks() {
      const query = document.getElementById('search').value.toLowerCase();
      const filteredBookmarks = bookmarks.filter(bookmark =>
        bookmark.title.toLowerCase().includes(query) || 
        bookmark.url.toLowerCase().includes(query)
      );
      displayFilteredBookmarks(filteredBookmarks);
    }

    function displayFilteredBookmarks(filteredBookmarks) {
      const bookmarksContainer = document.getElementById('bookmarks');
      bookmarksContainer.innerHTML = '';
      
      filteredBookmarks.forEach((bookmark, index) => {
        const div = document.createElement('div');
        div.classList.add('bookmark');
        
        const title = document.createElement('span');
        title.classList.add('bookmark-title');
        title.textContent = bookmark.title;

        const url = document.createElement('span');
        url.classList.add('bookmark-url');
        url.innerHTML = `<a href="${bookmark.url}" target="_blank">${bookmark.url}</a>`;

        const count = document.createElement('span');
        count.classList.add('count');
        count.textContent = `点击量: ${bookmark.clicks}`;

        const clickButton = document.createElement('button');
        clickButton.textContent = '点击';
        clickButton.onclick = () => {
          bookmark.clicks++;
          displayBookmarks();
          updateSortedBookmarks();
        };

        div.appendChild(title);
        div.appendChild(url);
        div.appendChild(count);
        div.appendChild(clickButton);

        bookmarksContainer.appendChild(div);
      });
    }

    // 登出功能
    function logout() {
      // 实现登出逻辑
      alert('登出成功');
    }

    // 初始显示
    displayBookmarks();
    updateSortedBookmarks();
  </script>
</body>
</html>
